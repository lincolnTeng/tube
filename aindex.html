<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tube Frontend</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
        }
        .container {
            display: flex;
            height: 100%;
        }
        .sidebar {
            width: 250px;
            background-color: #f1f1f1;
            padding: 20px;
            overflow-y: auto;
        }
        .content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* 树状导航样式 */
        .tree ul {
            list-style: none;
            padding-left: 20px;
            margin: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .tree ul.open {
            max-height: 1000px; /* 足够大的高度以适应内容 */
            transition: max-height 0.5s ease-in;
        }
        .tree li {
            margin: 10px 0;
            cursor: pointer;
        }
        /* 添加箭头指示器 */
        .tree li.has-children > span:before {
            content: '▶';
            display: inline-block;
            margin-right: 5px;
            transition: transform 0.3s ease;
        }
        .tree li.has-children.open > span:before {
            transform: rotate(90deg);
        }
        /* 鼠标悬停效果 */
        .tree li span:hover {
            color: #0066cc;
        }
        
        iframe {
            width: 100%;
            height: 400px;
            border: none;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="row" id=top>top </div>
    <div class="container">
        <div class="sidebar">
            <div id="nav-tree"></div>
        </div>
        <div class="content" id="content">
            <h1>Loading...</h1>
        </div>
    </div>
    <div class="row" id=bottom>bottom </div>

    <script>
    // 导航点击处理 - 处理展开/收起动画
    async function navonclick(target) {
        const element = document.querySelector(`[data-id="${target}"]`);
        if (element) {
            // 切换当前节点的展开状态
            element.classList.toggle('open');
            const ul = element.querySelector('ul');
            if (ul) {
                ul.classList.toggle('open');
            }
        }
    }

    // 内容加载
    async function gotoonclick(path) {
        const response = await fetch(path);
        const content = await response.text();
        document.getElementById('content').innerHTML = content;
    }

    // 页面加载时获取导航树
    document.addEventListener('DOMContentLoaded', async () => {
        const response = await fetch('/nav');
        const navHtml = await response.text();
        document.getElementById('nav-tree').innerHTML = navHtml;
    });
    </script>
</body>
</html>
